/**
 * @fileoverview
 * This file contains the global styles for the application, including Tailwind CSS setup,
 * design system tokens, responsive design utilities, and accessibility fallbacks.
 * All individual style files from `src/app/styles` have been consolidated here
 * to improve performance and maintainability.
 */

/* ==========================================================================
   1. Base Configuration & Tailwind Imports
   ========================================================================== */

@import "tailwindcss";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:is(.dark *));

@theme {
  --breakpoint-*: initial;
  --breakpoint-xs: 475px;
  --breakpoint-sm: 640px;
  --breakpoint-md: 768px;
  --breakpoint-lg: 1024px;
  --breakpoint-xl: 1280px;
  --breakpoint-2xl: 1536px;

  --font-sans:
    var(--font-geist-sans), ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
    "Segoe UI Symbol", "Noto Color Emoji";
  --font-mono:
    var(--font-geist-mono), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New",
    monospace;
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@layer utilities {
  body {
    font-family: var(--font-geist-sans);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground leading-relaxed;
    /* Optimize text rendering for mobile */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    /* Support zoom and touch interactions on mobile */
    touch-action: manipulation;
    /* Improve text selection on mobile */
    -webkit-user-select: text;
    user-select: text;
  }

  /* Mobile-first heading typography */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-semibold tracking-tight;
    /* Improve heading readability on mobile */
    line-height: 1.2;
    word-wrap: break-word;
    hyphens: auto;
  }

  /* Mobile-optimized heading sizes */
  h1 {
    font-size: max(28px, 1.75rem);
    margin-bottom: 1rem;
  }
  h2 {
    font-size: max(24px, 1.5rem);
    margin-bottom: 0.75rem;
  }
  h3 {
    font-size: max(20px, 1.25rem);
    margin-bottom: 0.5rem;
  }
  h4 {
    font-size: max(18px, 1.125rem);
    margin-bottom: 0.5rem;
  }

  @media (min-width: 768px) {
    h1 {
      margin-bottom: 1.5rem;
    }
    h2 {
      margin-bottom: 1rem;
    }
    h3 {
      margin-bottom: 0.75rem;
    }
  }

  /* Improve paragraph readability on mobile */
  p {
    line-height: 1.6;
    word-wrap: break-word;
    hyphens: auto;
  }

  /* Ensure minimum font sizes for critical content */
  .medication-content,
  .dosage-content,
  .medical-info {
    font-size: max(16px, 1rem);
  }

  /* Smooth transitions for color properties */
  body,
  input,
  select,
  button,
  textarea,
  .bg-background,
  .bg-card,
  .bg-popover,
  .bg-primary,
  .bg-secondary,
  .bg-muted,
  .bg-accent,
  .bg-destructive,
  .text-foreground,
  .text-card-foreground,
  .text-popover-foreground,
  .text-primary-foreground,
  .text-secondary-foreground,
  .text-muted-foreground,
  .text-accent-foreground,
  .text-destructive-foreground,
  .border-border,
  .border-input,
  .ring-ring {
    transition:
      color 0.2s ease-in-out,
      background-color 0.2s ease-in-out,
      border-color 0.2s ease-in-out,
      box-shadow 0.2s ease-in-out,
      fill 0.2s ease-in-out;
  }
}

/* ==========================================================================
   2. Design System Tokens - Colors
   ========================================================================== */

@theme {
  /* Base Colors */
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  /* Primary Color Scale */
  --color-primary-50: hsl(var(--primary-50));
  --color-primary-100: hsl(var(--primary-100));
  --color-primary-200: hsl(var(--primary-200));
  --color-primary-300: hsl(var(--primary-300));
  --color-primary-400: hsl(var(--primary-400));
  --color-primary-500: hsl(var(--primary-500));
  --color-primary-600: hsl(var(--primary-600));
  --color-primary-700: hsl(var(--primary-700));
  --color-primary-800: hsl(var(--primary-800));
  --color-primary-900: hsl(var(--primary-900));

  /* Secondary Color Scale */
  --color-secondary-50: hsl(var(--secondary-50));
  --color-secondary-100: hsl(var(--secondary-100));
  --color-secondary-200: hsl(var(--secondary-200));
  --color-secondary-300: hsl(var(--secondary-300));
  --color-secondary-400: hsl(var(--secondary-400));
  --color-secondary-500: hsl(var(--secondary-500));
  --color-secondary-600: hsl(var(--secondary-600));
  --color-secondary-700: hsl(var(--secondary-700));
  --color-secondary-800: hsl(var(--secondary-800));
  --color-secondary-900: hsl(var(--secondary-900));

  /* Semantic Colors */
  --color-success: hsl(var(--success));
  --color-success-light: hsl(var(--success-light));
  --color-success-dark: hsl(var(--success-dark));

  --color-warning: hsl(var(--warning));
  --color-warning-light: hsl(var(--warning-light));
  --color-warning-dark: hsl(var(--warning-dark));

  --color-error: hsl(var(--error));
  --color-error-light: hsl(var(--error-light));
  --color-error-dark: hsl(var(--error-dark));

  --color-info: hsl(var(--info));
  --color-info-light: hsl(var(--info-light));
  --color-info-dark: hsl(var(--info-dark));

  /* Chart Colors */
  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));

  /* Sidebar Colors */
  --color-sidebar: hsl(var(--sidebar-background));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));
}

@layer base {
  :root {
    /* Primary Color Scale (Teal/Cyan) */
    --primary-50: 175 70% 95%;
    --primary-100: 175 70% 90%;
    --primary-200: 175 68% 80%;
    --primary-300: 175 66% 70%;
    --primary-400: 175 64% 60%;
    --primary-500: 175 62% 50%;
    --primary-600: 175 65% 40%;
    --primary-700: 175 68% 30%;
    --primary-800: 175 70% 20%;
    --primary-900: 175 72% 10%;
    --primary-rgb: 48 199 181;

    /* Secondary Color Scale (Warm Accent) */
    --secondary-50: 30 100% 95%;
    --secondary-100: 30 100% 90%;
    --secondary-200: 30 98% 80%;
    --secondary-300: 30 96% 70%;
    --secondary-400: 30 94% 65%;
    --secondary-500: 30 92% 60%;
    --secondary-600: 30 90% 50%;
    --secondary-700: 30 88% 40%;
    --secondary-800: 30 86% 30%;
    --secondary-900: 30 84% 20%;

    /* Semantic Colors */
    --success: 142 76% 36%;
    --success-light: 142 76% 90%;
    --success-dark: 142 76% 20%;

    --warning: 38 92% 50%;
    --warning-light: 38 92% 90%;
    --warning-dark: 38 92% 30%;

    --error: 0 72% 51%;
    --error-light: 0 72% 90%;
    --error-dark: 0 72% 30%;

    --info: 217 91% 60%;
    --info-light: 217 91% 90%;
    --info-dark: 217 91% 30%;

    /* Light Theme Colors */
    --background: 210 25% 98%;
    --foreground: 215 28% 17%;
    --card: 0 0% 100%;
    --card-foreground: 215 28% 17%;
    --popover: 0 0% 100%;
    --popover-foreground: 215 28% 17%;
    --primary: 175 62% 50%;
    --primary-foreground: 180 100% 98%;
    --secondary: 30 92% 60%;
    --secondary-foreground: 24 20% 10%;
    --muted: 210 20% 94%;
    --muted-foreground: 215 16% 47%;
    --accent: 30 92% 60%;
    --accent-foreground: 24 20% 10%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 98%;
    --border: 210 18% 87%;
    --input: 210 18% 87%;
    --ring: 175 62% 50%;
    --radius: 0.5rem;

    /* Sidebar Colors */
    --sidebar-background: 210 25% 98%;
    --sidebar-foreground: 215 28% 17%;
    --sidebar-primary: 175 62% 50%;
    --sidebar-primary-foreground: 180 100% 98%;
    --sidebar-accent: 210 20% 94%;
    --sidebar-accent-foreground: 215 28% 17%;
    --sidebar-border: 210 18% 87%;
    --sidebar-ring: 175 62% 50%;

    /* Gradients */
    --gradient-hero: linear-gradient(135deg, hsl(175 62% 50%) 0%, hsl(195 62% 50%) 50%, hsl(215 62% 50%) 100%);
    --gradient-card: linear-gradient(180deg, hsl(0 0% 100%) 0%, hsl(210 25% 99%) 100%);
    --gradient-accent: linear-gradient(90deg, hsl(175 62% 50%) 0%, hsl(30 92% 60%) 100%);
  }

  .dark {
    /* Primary Color Scale (Teal/Cyan) - Same as light */
    --primary-50: 175 70% 95%;
    --primary-100: 175 70% 90%;
    --primary-200: 175 68% 80%;
    --primary-300: 175 66% 70%;
    --primary-400: 175 64% 60%;
    --primary-500: 175 62% 50%;
    --primary-600: 175 65% 40%;
    --primary-700: 175 68% 30%;
    --primary-800: 175 70% 20%;
    --primary-900: 175 72% 10%;
    --primary-rgb: 48 199 181;

    /* Secondary Color Scale (Warm Accent) - Same as light */
    --secondary-50: 30 100% 95%;
    --secondary-100: 30 100% 90%;
    --secondary-200: 30 98% 80%;
    --secondary-300: 30 96% 70%;
    --secondary-400: 30 94% 65%;
    --secondary-500: 30 92% 60%;
    --secondary-600: 30 90% 50%;
    --secondary-700: 30 88% 40%;
    --secondary-800: 30 86% 30%;
    --secondary-900: 30 84% 20%;

    /* Semantic Colors - Same as light */
    --success: 142 76% 36%;
    --success-light: 142 76% 90%;
    --success-dark: 142 76% 20%;

    --warning: 38 92% 50%;
    --warning-light: 38 92% 90%;
    --warning-dark: 38 92% 30%;

    --error: 0 72% 51%;
    --error-light: 0 72% 90%;
    --error-dark: 0 72% 30%;

    --info: 217 91% 60%;
    --info-light: 217 91% 90%;
    --info-dark: 217 91% 30%;

    /* Dark Theme Colors */
    --background: 222 47% 11%;
    --foreground: 210 40% 98%;
    --card: 222 47% 14%;
    --card-foreground: 210 40% 98%;
    --popover: 222 47% 14%;
    --popover-foreground: 210 40% 98%;
    --primary: 175 62% 55%;
    --primary-foreground: 180 100% 98%;
    --secondary: 30 92% 60%;
    --secondary-foreground: 24 20% 10%;
    --muted: 222 40% 18%;
    --muted-foreground: 215 20% 65%;
    --accent: 30 92% 60%;
    --accent-foreground: 24 20% 10%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 98%;
    --border: 222 40% 22%;
    --input: 222 40% 22%;
    --ring: 175 62% 55%;

    /* Sidebar Colors */
    --sidebar-background: 222 47% 11%;
    --sidebar-foreground: 210 40% 98%;
    --sidebar-primary: 175 62% 55%;
    --sidebar-primary-foreground: 180 100% 98%;
    --sidebar-accent: 222 40% 18%;
    --sidebar-accent-foreground: 210 40% 98%;
    --sidebar-border: 222 40% 22%;
    --sidebar-ring: 175 62% 55%;

    /* Gradients - Dark Theme */
    --gradient-hero: linear-gradient(135deg, hsl(175 62% 55%) 0%, hsl(195 62% 55%) 50%, hsl(215 62% 55%) 100%);
    --gradient-card: linear-gradient(180deg, hsl(222 47% 14%) 0%, hsl(222 47% 12%) 100%);
    --gradient-accent: linear-gradient(90deg, hsl(175 62% 55%) 0%, hsl(30 92% 60%) 100%);
  }
}

/* ==========================================================================
   3. Design System Tokens - Typography
   ========================================================================== */

@theme {
  /* Typography Scale - Base (16px) */
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --text-3xl: 1.875rem;
  --text-4xl: 2.25rem;
  --text-5xl: 3rem;

  /* Font Weights */
  --font-light: 300;
  --font-normal: 400;
  --font-medium: 500;
  --font-semibold: 600;
  --font-bold: 700;
  --font-extrabold: 800;

  /* Line Heights */
  --leading-none: 1;
  --leading-tight: 1.25;
  --leading-snug: 1.375;
  --leading-normal: 1.5;
  --leading-relaxed: 1.625;
  --leading-loose: 2;

  /* Letter Spacing */
  --tracking-tighter: -0.05em;
  --tracking-tight: -0.025em;
  --tracking-normal: 0;
  --tracking-wide: 0.025em;
  --tracking-wider: 0.05em;
  --tracking-widest: 0.1em;
}

/* Responsive Typography using @layer base */
@layer base {
  @media (min-width: 768px) {
    :root {
      --text-base: 1.0625rem;
      --text-xs: 0.796875rem;
      --text-sm: 0.9296875rem;
      --text-lg: 1.1953125rem;
      --text-xl: 1.328125rem;
      --text-2xl: 1.59375rem;
      --text-3xl: 1.9921875rem;
      --text-4xl: 2.390625rem;
      --text-5xl: 3.1875rem;
    }
  }

  @media (min-width: 1024px) {
    :root {
      --text-base: 1.125rem;
      --text-xs: 0.84375rem;
      --text-sm: 0.984375rem;
      --text-lg: 1.265625rem;
      --text-xl: 1.40625rem;
      --text-2xl: 1.6875rem;
      --text-3xl: 2.109375rem;
      --text-4xl: 2.53125rem;
      --text-5xl: 3.375rem;
    }
  }
}

/* Typography Utility Classes */
@utility text-heading-1 {
  font-size: var(--text-4xl);
  font-weight: var(--font-bold);
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-tight);
}

@utility text-heading-2 {
  font-size: var(--text-3xl);
  font-weight: var(--font-bold);
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-tight);
}

@utility text-heading-3 {
  font-size: var(--text-2xl);
  font-weight: var(--font-semibold);
  line-height: var(--leading-snug);
  letter-spacing: var(--tracking-tight);
}

@utility text-heading-4 {
  font-size: var(--text-xl);
  font-weight: var(--font-semibold);
  line-height: var(--leading-snug);
  letter-spacing: var(--tracking-normal);
}

@utility text-heading-5 {
  font-size: var(--text-lg);
  font-weight: var(--font-medium);
  line-height: var(--leading-normal);
  letter-spacing: var(--tracking-normal);
}

@utility text-heading-6 {
  font-size: var(--text-base);
  font-weight: var(--font-medium);
  line-height: var(--leading-normal);
  letter-spacing: var(--tracking-normal);
}

@utility text-body-large {
  font-size: var(--text-lg);
  font-weight: var(--font-normal);
  line-height: var(--leading-relaxed);
}

@utility text-body {
  font-size: var(--text-base);
  font-weight: var(--font-normal);
  line-height: var(--leading-normal);
}

@utility text-body-small {
  font-size: var(--text-sm);
  font-weight: var(--font-normal);
  line-height: var(--leading-normal);
}

@utility text-caption {
  font-size: var(--text-xs);
  font-weight: var(--font-normal);
  line-height: var(--leading-normal);
}

/* Mobile typography components */
@utility mobile-readable {
  font-size: max(16px, 1rem);
  line-height: 1.5;
  letter-spacing: 0.01em;
}

@utility mobile-heading {
  font-size: max(18px, 1.125rem);
  line-height: 1.3;
  font-weight: 600;
  letter-spacing: -0.01em;
}

@utility mobile-subheading {
  font-size: max(16px, 1rem);
  line-height: 1.4;
  font-weight: 500;
  letter-spacing: 0;
}

@utility critical-info {
  /* Critical medical information typography */
  font-size: max(18px, 1.125rem);
  line-height: 1.4;
  font-weight: 600;
  color: hsl(var(--foreground));
  letter-spacing: 0.01em;
}

@utility medication-name-display {
  font-size: max(16px, 1rem);
  line-height: 1.4;
  font-weight: 600;
  color: hsl(var(--foreground));
  word-break: break-word;
  hyphens: auto;
}

@utility dosage-display {
  font-size: max(24px, 1.5rem);
  line-height: 1.2;
  font-weight: 700;
  color: hsl(var(--primary));
  letter-spacing: 0.02em;
  text-align: center;
}

@utility frequency-display {
  font-size: max(14px, 0.875rem);
  line-height: 1.4;
  font-weight: 500;
  color: hsl(var(--primary) / 0.9);
  text-align: center;
}

@utility detail-text {
  font-size: max(14px, 0.875rem);
  line-height: 1.5;
  color: hsl(var(--muted-foreground));
  font-weight: 500;
}

/* ==========================================================================
   4. Design System Tokens - Spacing
   ========================================================================== */

@theme {
  /* Spacing System (4px base unit) */
  --space-0: 0;
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-10: 2.5rem;
  --space-12: 3rem;
  --space-16: 4rem;
  --space-20: 5rem;
  --space-24: 6rem;

  /* Semantic Spacing */
  --spacing-section: var(--space-12);
  --spacing-component: var(--space-6);
  --spacing-element: var(--space-4);
  --spacing-inline: var(--space-2);

  /* Safe Area Insets */
  --spacing-safe-top: env(safe-area-inset-top);
  --spacing-safe-bottom: env(safe-area-inset-bottom);
  --spacing-safe-left: env(safe-area-inset-left);
  --spacing-safe-right: env(safe-area-inset-right);
}

/* Spacing Utility Classes */

/* Margin utilities */
@utility spacing-section {
  margin-bottom: var(--spacing-section);
}

@utility spacing-component {
  margin-bottom: var(--spacing-component);
}

@utility spacing-element {
  margin-bottom: var(--spacing-element);
}

@utility spacing-inline {
  margin-bottom: var(--spacing-inline);
}

/* Gap utilities for flexbox and grid */
@utility gap-section {
  gap: var(--spacing-section);
}

@utility gap-component {
  gap: var(--spacing-component);
}

@utility gap-element {
  gap: var(--spacing-element);
}

@utility gap-inline {
  gap: var(--spacing-inline);
}

/* Padding utilities */
@utility padding-section {
  padding: var(--spacing-section);
}

@utility padding-component {
  padding: var(--spacing-component);
}

@utility padding-element {
  padding: var(--spacing-element);
}

@utility padding-inline {
  padding: var(--spacing-inline);
}

/* Consistent spacing for lists and grids */
@utility list-spacing {
  gap: var(--space-3); /* 12px for compact lists */
}

@utility list-spacing-standard {
  gap: var(--space-4); /* 16px for standard lists */
}

@utility list-spacing-spacious {
  gap: var(--space-6); /* 24px for spacious lists */
}

/* Section spacing utilities */
@utility section-spacing {
  margin-top: var(--spacing-section);
  margin-bottom: var(--spacing-section);
}

@utility section-spacing-top {
  margin-top: var(--spacing-section);
}

@utility section-spacing-bottom {
  margin-bottom: var(--spacing-section);
}

/* Component spacing utilities */
@utility component-spacing {
  margin-top: var(--spacing-component);
  margin-bottom: var(--spacing-component);
}

@utility component-spacing-top {
  margin-top: var(--spacing-component);
}

@utility component-spacing-bottom {
  margin-bottom: var(--spacing-component);
}

/* ==========================================================================
   5. Design System Tokens - Borders
   ========================================================================== */

@theme {
  /* Border Radius System */
  --radius-none: 0;
  --radius-sm: 0.25rem;
  --radius-base: 0.5rem;
  --radius-md: 0.75rem;
  --radius-lg: 1rem;
  --radius-xl: 1.5rem;
  --radius-2xl: 2rem;
  --radius-full: 9999px;

  /* Component-specific Radius */
  --radius-button: var(--radius-md);
  --radius-card: var(--radius-lg);
  --radius-input: var(--radius-base);
  --radius-modal: var(--radius-xl);
  --radius-badge: var(--radius-full);
}

/* Border Radius Utility Classes */
@utility rounded-none {
  border-radius: var(--radius-none);
}

@utility rounded-sm {
  border-radius: var(--radius-sm);
}

@utility rounded-base {
  border-radius: var(--radius-base);
}

@utility rounded-md {
  border-radius: var(--radius-md);
}

@utility rounded-lg {
  border-radius: var(--radius-lg);
}

@utility rounded-xl {
  border-radius: var(--radius-xl);
}

@utility rounded-2xl {
  border-radius: var(--radius-2xl);
}

@utility rounded-full {
  border-radius: var(--radius-full);
}

/* Component-specific Radius Utility Classes */
@utility rounded-button {
  border-radius: var(--radius-button);
}

@utility rounded-card {
  border-radius: var(--radius-card);
}

@utility rounded-input {
  border-radius: var(--radius-input);
}

@utility rounded-modal {
  border-radius: var(--radius-modal);
}

@utility rounded-badge {
  border-radius: var(--radius-badge);
}

/* ==========================================================================
   6. Design System Tokens - Shadows
   ========================================================================== */

@layer base {
  :root {
    /* Shadows - Light Theme */
    --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    --shadow-base: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-md: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);
    --shadow-2xl: 0 35px 60px -15px rgb(0 0 0 / 0.3);
    --shadow-primary: 0 10px 15px -3px rgb(var(--primary-rgb) / 0.2), 0 4px 6px -4px rgb(var(--primary-rgb) / 0.2);
  }

  .dark {
    /* Shadows - Dark Theme (more pronounced) */
    --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.4), 0 1px 2px -1px rgb(0 0 0 / 0.4);
    --shadow-base: 0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.4);
    --shadow-md: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.4);
    --shadow-lg: 0 20px 25px -5px rgb(0 0 0 / 0.4), 0 8px 10px -6px rgb(0 0 0 / 0.4);
    --shadow-xl: 0 25px 50px -12px rgb(0 0 0 / 0.5);
    --shadow-2xl: 0 35px 60px -15px rgb(0 0 0 / 0.6);
    --shadow-primary: 0 10px 15px -3px rgb(var(--primary-rgb) / 0.2), 0 4px 6px -4px rgb(var(--primary-rgb) / 0.2);
  }
}

/* Shadow Utility Classes */
@utility shadow-xs {
  box-shadow: var(--shadow-xs);
}

@utility shadow-sm {
  box-shadow: var(--shadow-sm);
}

@utility shadow-base {
  box-shadow: var(--shadow-base);
}

@utility shadow-md {
  box-shadow: var(--shadow-md);
}

@utility shadow-lg {
  box-shadow: var(--shadow-lg);
}

@utility shadow-xl {
  box-shadow: var(--shadow-xl);
}

@utility shadow-2xl {
  box-shadow: var(--shadow-2xl);
}

@utility shadow-primary {
  box-shadow: var(--shadow-primary);
}

@utility shadow-none {
  box-shadow: none;
}

/* Elevation Level Utility Classes */
@utility elevation-0 {
  /* Base level - no shadow, on background */
  box-shadow: none;
  position: relative;
  z-index: 0;
}

@utility elevation-1 {
  /* Raised - subtle lift */
  box-shadow: var(--shadow-xs);
  position: relative;
  z-index: 1;
}

@utility elevation-2 {
  /* Card - standard cards */
  box-shadow: var(--shadow-sm);
  position: relative;
  z-index: 2;
}

@utility elevation-3 {
  /* Hover - interactive hover state */
  box-shadow: var(--shadow-md);
  position: relative;
  z-index: 3;
}

@utility elevation-4 {
  /* Modal - overlays and modals */
  box-shadow: var(--shadow-lg);
  position: relative;
  z-index: 40;
}

@utility elevation-5 {
  /* Popover - dropdowns and popovers */
  box-shadow: var(--shadow-xl);
  position: relative;
  z-index: 50;
}

@utility elevation-6 {
  /* Tooltip - highest elevation */
  box-shadow: var(--shadow-2xl);
  position: relative;
  z-index: 60;
}

/* ==========================================================================
   7. Design System Tokens - Animations
   ========================================================================== */

@theme {
  /* Animation Durations */
  --duration-instant: 100ms;
  --duration-fast: 200ms;
  --duration-base: 300ms;
  --duration-slow: 400ms;
  --duration-slower: 600ms;

  /* Animation Timing Functions */
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);

  /* Animations */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
}

/* GPU-Accelerated Animations - Using transform and opacity only */

@keyframes accordion-down {
  from {
    height: 0;
  }
  to {
    height: var(--radix-accordion-content-height);
  }
}

@keyframes accordion-up {
  from {
    height: var(--radix-accordion-content-height);
  }
  to {
    height: 0;
  }
}

@keyframes slide-down {
  from {
    height: 0;
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    height: var(--radix-collapsible-content-height);
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slide-up {
  from {
    height: var(--radix-collapsible-content-height);
    opacity: 1;
    transform: translateY(0);
  }
  to {
    height: 0;
    opacity: 0;
    transform: translateY(-10px);
  }
}

/* Page Transition Animations */
@keyframes page-exit {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(-20px);
  }
}

@keyframes page-enter {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.CollapsibleContent[data-state="open"] {
  animation: slide-down 300ms ease-out;
}
.CollapsibleContent[data-state="closed"] {
  animation: slide-up 300ms ease-out;
}

/* Loading State Animations */
@keyframes rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes draw-check {
  from {
    stroke-dashoffset: 100;
  }
  to {
    stroke-dashoffset: 0;
  }
}

@keyframes progress {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(100%);
  }
}

/* Page transition utility classes */
.page-exit {
  animation: page-exit 200ms ease-out;
}

.page-enter {
  animation: page-enter 300ms ease-out 100ms;
  animation-fill-mode: backwards;
}

/* Loading animation utility classes */
.animate-spin {
  animation: rotate 1s linear infinite;
}

.animate-pulse {
  animation: pulse 2s ease-in-out infinite;
}

.animate-check {
  animation: draw-check 400ms ease-out;
  stroke-dasharray: 100;
}

.animate-progress {
  animation: progress 1.5s ease-in-out infinite;
}

/* GPU Acceleration Utilities */
/* Use sparingly - only for elements that will definitely animate */
.will-animate {
  will-change: transform, opacity;
}

.will-animate-transform {
  will-change: transform;
}

.will-animate-opacity {
  will-change: opacity;
}

/* Remove will-change after animation completes to free resources */
.will-animate-auto {
  will-change: auto;
}

/* GPU-accelerated transform utilities */
.gpu-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Apply to animated elements for better performance */
.animate-spin,
.animate-pulse,
.animate-check,
.animate-progress,
.page-exit,
.page-enter {
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Staggered animation utilities */
.stagger-item {
  opacity: 0;
  transform: translateY(10px);
  transition:
    opacity 300ms ease-out,
    transform 300ms ease-out;
}

.stagger-item.active {
  opacity: 1;
  transform: translateY(0);
}

/* Animation delay utilities for staggering */
.stagger-delay-1 {
  animation-delay: 50ms;
}

.stagger-delay-2 {
  animation-delay: 100ms;
}

.stagger-delay-3 {
  animation-delay: 150ms;
}

.stagger-delay-4 {
  animation-delay: 200ms;
}

.stagger-delay-5 {
  animation-delay: 250ms;
}

/* Limit animation complexity for performance */
.animate-simple {
  animation-timing-function: linear;
}

.animate-performance {
  animation-timing-function: ease-out;
  animation-fill-mode: forwards;
}

/* Reduced Motion Support */
/* Note: !important is required here to override all animations for accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Preserve essential functionality without animation */
  .page-exit,
  .page-enter {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
  }

  .animate-spin,
  .animate-pulse,
  .animate-check,
  .animate-progress {
    animation: none !important;
  }

  /* Keep spinner visible but static */
  .animate-spin {
    opacity: 1 !important;
  }

  /* Show progress bar at full width for indeterminate state */
  .animate-progress {
    transform: none !important;
    width: 100% !important;
  }

  /* Remove will-change in reduced motion mode */
  .will-animate,
  .will-animate-transform,
  .will-animate-opacity {
    will-change: auto !important;
  }

  /* Ensure staggered items are immediately visible */
  .stagger-item {
    opacity: 1 !important;
    transform: none !important;
    transition: none !important;
  }

  /* Remove animation delays */
  .stagger-delay-1,
  .stagger-delay-2,
  .stagger-delay-3,
  .stagger-delay-4,
  .stagger-delay-5 {
    animation-delay: 0s !important;
  }

  /* Ensure collapsible content shows/hides instantly */
  .CollapsibleContent[data-state="open"],
  .CollapsibleContent[data-state="closed"] {
    animation: none !important;
  }

  /* Accordion instant state changes */
  [data-radix-accordion-content] {
    animation: none !important;
  }

  /* Modal/Dialog instant appearance */
  [data-radix-dialog-overlay],
  [data-radix-dialog-content] {
    animation: none !important;
  }

  /* Tooltip instant appearance */
  [data-radix-tooltip-content] {
    animation: none !important;
  }

  /* Dropdown instant appearance */
  [data-radix-dropdown-menu-content],
  [data-radix-select-content] {
    animation: none !important;
  }

  /* Hover effects become instant state changes */
  *:hover {
    transition: none !important;
  }

  /* Focus effects become instant state changes */
  *:focus,
  *:focus-visible {
    transition: none !important;
  }

  /* Active effects become instant state changes */
  *:active {
    transition: none !important;
  }
}

/* Scroll performance optimizations */
.scroll-smooth {
  scroll-behavior: smooth;
}

/* Optimize scrolling containers */
.scroll-optimized {
  -webkit-overflow-scrolling: touch;
  overflow-y: auto;
  overscroll-behavior-y: contain;
}

/* Contain layout shifts during scroll */
.scroll-container {
  contain: layout style paint;
}

/* Passive scroll listener hint */
.passive-scroll {
  touch-action: pan-y;
}

/* ==========================================================================
   8. Visual Hierarchy Utilities
   ========================================================================== */

@theme {
  /* Visual Hierarchy Variables */
  --hierarchy-primary-size: 1;
  --hierarchy-secondary-size: 0.875;
  --hierarchy-tertiary-size: 0.75;

  --hierarchy-primary-weight: 600;
  --hierarchy-secondary-weight: 500;
  --hierarchy-tertiary-weight: 400;
}

/* Typography Hierarchy Utilities */

/* Primary information - most important */
@utility text-hierarchy-primary {
  font-size: calc(var(--text-base) * var(--hierarchy-primary-size));
  font-weight: var(--hierarchy-primary-weight);
  color: var(--foreground);
  line-height: var(--leading-tight);
}

/* Secondary information - supporting details */
@utility text-hierarchy-secondary {
  font-size: calc(var(--text-base) * var(--hierarchy-secondary-size));
  font-weight: var(--hierarchy-secondary-weight);
  color: var(--muted-foreground);
  line-height: var(--leading-normal);
}

/* Tertiary information - least important */
@utility text-hierarchy-tertiary {
  font-size: calc(var(--text-base) * var(--hierarchy-tertiary-size));
  font-weight: var(--hierarchy-tertiary-weight);
  color: var(--muted-foreground);
  line-height: var(--leading-normal);
}

/* Visual Grouping Utilities */

/* Group related content with subtle background */
@utility group-subtle {
  background-color: var(--muted);
  border-radius: var(--radius-base);
  padding: var(--spacing-element);
}

/* Group related content with border */
@utility group-bordered {
  border: 1px solid var(--border);
  border-radius: var(--radius-base);
  padding: var(--spacing-element);
}

/* Group related content with card styling */
@utility group-card {
  background-color: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: var(--spacing-component);
  box-shadow: var(--shadow-sm);
}

/* Group related content with elevated styling */
@utility group-elevated {
  background-color: var(--card);
  border-radius: var(--radius-lg);
  padding: var(--spacing-component);
  box-shadow: var(--shadow-md);
}

/* Visual Separation Utilities */

/* Subtle divider between sections */
@utility divider-subtle {
  border-top: 1px solid var(--border);
  margin-top: var(--spacing-component);
  margin-bottom: var(--spacing-component);
}

/* Prominent divider between major sections */
@utility divider-prominent {
  border-top: 2px solid var(--border);
  margin-top: var(--spacing-section);
  margin-bottom: var(--spacing-section);
}

/* Content Hierarchy Utilities */

/* Primary content area */
@utility content-primary {
  background-color: var(--background);
  color: var(--foreground);
}

/* Secondary content area */
@utility content-secondary {
  background-color: var(--muted);
  color: var(--muted-foreground);
}

/* Highlighted content area */
@utility content-highlight {
  background-color: var(--primary);
  color: var(--primary-foreground);
  padding: var(--spacing-element);
  border-radius: var(--radius-base);
}

/* Muted content area */
@utility content-muted {
  background-color: var(--muted);
  color: var(--muted-foreground);
  padding: var(--spacing-element);
  border-radius: var(--radius-base);
}

/* Section Headers */
@utility section-header {
  font-size: var(--text-2xl);
  font-weight: var(--font-bold);
  color: var(--foreground);
  line-height: var(--leading-tight);
  margin-bottom: var(--spacing-component);
}

@utility section-subheader {
  font-size: var(--text-lg);
  font-weight: var(--font-semibold);
  color: var(--foreground);
  line-height: var(--leading-snug);
  margin-bottom: var(--spacing-element);
}

/* ==========================================================================
   9. General Purpose Utilities
   ========================================================================== */

@utility sr-only {
  /* For screen-reader only content */
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

@utility zoom-safe {
  /* Zoom support utilities */
  /* Ensure content remains accessible at 200% zoom */
  max-width: 100%;
  overflow-wrap: break-word;
  word-wrap: break-word;
  hyphens: auto;
}

@utility zoom-safe-flex {
  /* Flex containers that work well with zoom */
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  align-items: flex-start;
}

@utility enhanced-contrast {
  /* High contrast enhancements */
  color: hsl(var(--foreground));
  background-color: hsl(var(--background));
  border: 1px solid hsl(var(--border));
}

@utility enhanced-contrast-muted {
  color: hsl(var(--muted-foreground));
  font-weight: 500;
}

.dark .alert-destructive-text {
  @apply text-destructive-foreground;
}

/* Add custom focus-visible styles for better accessibility */
.focus-visible-ring {
  @apply focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
}

/* Gradient Background Utilities with Fallbacks */
@utility bg-gradient-hero {
  /* Fallback solid color with sufficient contrast */
  background: hsl(var(--primary-500));
  /* Enhanced gradient */
  background: var(--gradient-hero);
}

@utility bg-gradient-card {
  /* Fallback solid color */
  background: hsl(var(--card));
  /* Enhanced gradient */
  background: var(--gradient-card);
}

@utility bg-gradient-accent {
  /* Fallback solid color with sufficient contrast */
  background: hsl(var(--primary-500));
  /* Enhanced gradient */
  background: var(--gradient-accent);
}

/* Additional gradient utilities with fallbacks */
@utility bg-gradient-primary {
  background: hsl(var(--primary-500));
  background: linear-gradient(135deg, hsl(var(--primary-400)) 0%, hsl(var(--primary-600)) 100%);
}

@utility bg-gradient-secondary {
  background: hsl(var(--secondary-500));
  background: linear-gradient(135deg, hsl(var(--secondary-400)) 0%, hsl(var(--secondary-600)) 100%);
}

@utility bg-gradient-success {
  background: hsl(var(--success));
  background: linear-gradient(135deg, hsl(var(--success)) 0%, hsl(var(--success-dark)) 100%);
}

/* Text gradient utilities with fallbacks */
@utility text-gradient-hero {
  color: hsl(var(--primary-500));
  background: var(--gradient-hero);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

@supports not (background-clip: text) {
  .text-gradient-hero {
    color: hsl(var(--primary-500));
    background: none;
    -webkit-text-fill-color: currentColor;
  }
}

@utility text-gradient-accent {
  color: hsl(var(--primary-500));
  background: var(--gradient-accent);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

@supports not (background-clip: text) {
  .text-gradient-accent {
    color: hsl(var(--primary-500));
    background: none;
    -webkit-text-fill-color: currentColor;
  }
}

/* Glassmorphism Effect Utilities */
@utility glass-effect {
  background: hsl(var(--background) / 0.95);
  backdrop-filter: blur(12px) saturate(180%);
  -webkit-backdrop-filter: blur(12px) saturate(180%);
}

/* Fallback for browsers without backdrop-filter support */
@supports not (backdrop-filter: blur(12px)) {
  .glass-effect {
    background: hsl(var(--background) / 0.98);
    border: 1px solid hsl(var(--border));
    box-shadow:
      0 4px 6px -1px rgb(0 0 0 / 0.1),
      0 2px 4px -2px rgb(0 0 0 / 0.1);
  }
}

@utility glass-card {
  background: hsl(var(--card) / 0.9);
  backdrop-filter: blur(10px) saturate(150%);
  -webkit-backdrop-filter: blur(10px) saturate(150%);
  border: 1px solid hsl(var(--border) / 0.3);
}

/* Fallback for browsers without backdrop-filter support */
@supports not (backdrop-filter: blur(10px)) {
  .glass-card {
    background: hsl(var(--card) / 0.98);
    border: 1px solid hsl(var(--border));
    box-shadow:
      0 1px 3px 0 rgb(0 0 0 / 0.1),
      0 1px 2px -1px rgb(0 0 0 / 0.1);
  }
}

/* Additional glassmorphism utilities with fallbacks */
@utility glass-modal {
  background: hsl(var(--background) / 0.8);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

@supports not (backdrop-filter: blur(8px)) {
  .glass-modal {
    background: hsl(var(--background) / 0.98);
    border: 1px solid hsl(var(--border));
  }
}

@utility glass-nav {
  background: hsl(var(--background) / 0.95);
  backdrop-filter: blur(16px) saturate(180%);
  -webkit-backdrop-filter: blur(16px) saturate(180%);
}

@supports not (backdrop-filter: blur(16px)) {
  .glass-nav {
    background: hsl(var(--background) / 0.98);
    border-top: 1px solid hsl(var(--border));
    box-shadow: 0 -4px 6px -1px rgb(0 0 0 / 0.1);
  }
}

/* ==========================================================================
   10. Mobile & Responsive Utilities
   ========================================================================== */

@utility mobile-safe-area {
  /* Mobile safe area utilities */
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

@utility mobile-safe-area-top {
  padding-top: env(safe-area-inset-top);
}

@utility mobile-safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

@utility mobile-safe-area-full {
  padding-top: env(safe-area-inset-top);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
}

@utility mobile-container {
  /* Mobile container utilities */
  padding-left: 0.75rem; /* 12px */
  padding-right: 0.75rem;
}

@media screen and (max-height: 500px) and (orientation: landscape) {
  .mobile-container {
    /* Reduce padding for mobile landscape */
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }
}

@utility tablet-container {
  padding-left: 1.5rem; /* 24px */
  padding-right: 1.5rem;
}

@utility orientation-transition {
  /* Orientation-aware utilities */
  transition: all 0.3s ease-in-out;

  /* Mobile landscape specific optimizations */

  /* Tablet landscape optimizations */

  /* Smooth transitions for orientation changes */
  transition:
    grid-template-columns 0.3s ease-in-out,
    gap 0.3s ease-in-out,
    padding 0.3s ease-in-out,
    max-height 0.3s ease-in-out;
  @media (prefers-reduced-motion: no-preference) {
    transition-duration: 0.3s;
  }

  @media (prefers-reduced-motion: reduce) {
    transition-duration: 0.1s;
  }
}

@utility landscape-optimized {
  /* Optimizations for landscape orientation */
  max-height: 75vh;
  overflow-y: auto;
}

@media screen and (max-height: 500px) and (orientation: landscape) {
  .landscape-optimized {
    max-height: 85vh;
  }
}

@media screen and (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
  .landscape-optimized {
    max-height: 70vh;
  }
}

@utility portrait-optimized {
  /* Optimizations for portrait orientation */
  min-height: 400px;
}

@utility mobile-landscape-layout {
  /* Layout-specific orientation classes */
  /* Mobile landscape optimizations */
  --spacing-y: 0.5rem;
  --container-padding: 0.75rem;
  --form-height: 60vh;
}

@utility mobile-portrait-layout {
  /* Mobile portrait optimizations */
  --spacing-y: 1rem;
  --container-padding: 0.75rem;
  --form-height: auto;
}

@utility tablet-landscape-layout {
  /* Tablet landscape optimizations */
  --spacing-y: 1.5rem;
  --container-padding: 1.5rem;
  --form-height: 70vh;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  align-items: start;
}

@utility tablet-portrait-layout {
  /* Tablet portrait optimizations */
  --spacing-y: 1.25rem;
  --container-padding: 1rem;
  --form-height: auto;
}

@utility landscape-layout {
  transition:
    grid-template-columns 0.3s ease-in-out,
    gap 0.3s ease-in-out,
    padding 0.3s ease-in-out,
    max-height 0.3s ease-in-out;
}

@media screen and (max-height: 500px) and (orientation: landscape) {
  .landscape-layout {
    --spacing-y: 0.5rem;
    --container-padding: 0.5rem;
  }
}

@media screen and (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
  .landscape-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    align-items: start;
  }
}

@utility space-y-3 {
  & > * + * {
    margin-top: 0.75rem;
  }
}

@utility space-y-4 {
  & > * + * {
    margin-top: 1rem;
  }
}

@media screen and (max-height: 500px) and (orientation: landscape) {
  .space-y-3 {
    /* Compact form spacing in mobile landscape */
    & > * + * {
      margin-top: 0.5rem;
    }
  }

  .space-y-4 {
    & > * + * {
      margin-top: 0.75rem;
    }
  }
}

@utility portrait-layout {
  transition:
    grid-template-columns 0.3s ease-in-out,
    gap 0.3s ease-in-out,
    padding 0.3s ease-in-out,
    max-height 0.3s ease-in-out;
}

/* ==========================================================================
   11. Responsive Design Enhancements
   ========================================================================== */

/*
  This section implements a comprehensive responsive design system for the Doses application,
  covering layout, spacing, and typography across three breakpoints:
  - Mobile: < 768px
  - Tablet: 768px - 1024px
  - Desktop: 1024px+
*/

@layer base {
  /* Mobile Layout (< 768px) */
  @media (max-width: 767px) {
    /* Ensure single-column layout for content */
    .responsive-grid,
    .responsive-columns {
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
    }

    /* Mobile-specific spacing and padding */
    .mobile-section {
      padding: var(--space-4);
      margin-bottom: var(--space-6);
    }

    .mobile-card {
      padding: var(--space-4);
      margin-bottom: var(--space-4);
    }

    /* Optimize touch targets for mobile (minimum 48x48px) */
    button,
    a,
    input[type="button"],
    input[type="submit"],
    input[type="reset"],
    .touch-target {
      min-height: 48px;
      min-width: 48px;
      padding: 12px 16px;
    }

    /* Ensure interactive elements have adequate spacing */
    .interactive-list > * + * {
      margin-top: var(--space-3);
    }

    /* Mobile navigation items */
    nav a,
    nav button {
      min-height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: var(--space-3);
    }

    /* Portrait orientation optimizations */
    @media (orientation: portrait) {
      .mobile-portrait-stack {
        display: flex;
        flex-direction: column;
        gap: var(--space-4);
      }

      .mobile-portrait-spacing {
        padding: var(--space-4) var(--space-3);
      }
    }

    /* Landscape orientation optimizations */
    @media (orientation: landscape) {
      .mobile-landscape-compact {
        padding: var(--space-2) var(--space-3);
      }

      .mobile-landscape-row {
        display: flex;
        flex-direction: row;
        gap: var(--space-3);
        align-items: center;
      }

      /* Reduce vertical spacing in landscape */
      .mobile-section {
        padding: var(--space-3);
        margin-bottom: var(--space-4);
      }
    }
  }

  /* Tablet Layout (768px to 1024px) */
  @media (min-width: 768px) and (max-width: 1023px) {
    /* Two-column layout for appropriate sections */
    .tablet-two-column {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-6);
    }

    /* Adjust spacing for larger screens */
    .tablet-section {
      padding: var(--space-6);
      margin-bottom: var(--space-8);
    }

    .tablet-card {
      padding: var(--space-5);
      margin-bottom: var(--space-5);
    }

    /* Portrait orientation */
    @media (orientation: portrait) {
      .tablet-portrait-stack {
        display: flex;
        flex-direction: column;
        gap: var(--space-5);
      }

      .tablet-portrait-spacing {
        padding: var(--space-5) var(--space-4);
      }

      /* Some sections may benefit from single column in portrait */
      .tablet-portrait-single {
        grid-template-columns: 1fr;
      }
    }

    /* Landscape orientation */
    @media (orientation: landscape) {
      .tablet-landscape-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--space-6);
        align-items: start;
      }

      .tablet-landscape-spacing {
        padding: var(--space-4) var(--space-6);
      }

      /* Wider layout for landscape */
      .tablet-landscape-wide {
        max-width: 100%;
      }
    }

    /* Smooth transitions between orientations */
    .tablet-orientation-transition {
      transition:
        grid-template-columns 300ms ease-in-out,
        gap 300ms ease-in-out,
        padding 300ms ease-in-out;
    }
  }

  /* Desktop Layout (1024px+) */
  @media (min-width: 1024px) {
    /* Maximum width constraints */
    .desktop-container {
      max-width: 1280px;
      margin-left: auto;
      margin-right: auto;
    }

    .desktop-container-wide {
      max-width: 1536px;
      margin-left: auto;
      margin-right: auto;
    }

    .desktop-container-narrow {
      max-width: 1024px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Desktop spacing */
    .desktop-section {
      padding: var(--space-8);
      margin-bottom: var(--space-12);
    }

    .desktop-card {
      padding: var(--space-6);
      margin-bottom: var(--space-6);
    }

    /* Hover effects for pointer devices */
    @media (hover: hover) and (pointer: fine) {
      button:hover,
      a:hover,
      .hoverable:hover {
        transform: translateY(-2px);
        transition: transform 200ms ease-out;
      }

      .card-hover:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-lg);
        border-color: hsl(var(--primary) / 0.3);
        transition:
          transform 200ms ease-out,
          box-shadow 200ms ease-out,
          border-color 200ms ease-out;
      }

      .button-hover:hover {
        transform: scale(1.02);
        box-shadow: var(--shadow-md);
        transition:
          transform 200ms ease-out,
          box-shadow 200ms ease-out;
      }
    }

    /* Keyboard navigation enhancements */
    *:focus-visible {
      outline: 2px solid hsl(var(--primary));
      outline-offset: 2px;
      border-radius: var(--radius-base);
    }

    button:focus-visible,
    a:focus-visible,
    input:focus-visible,
    select:focus-visible,
    textarea:focus-visible {
      outline: 2px solid hsl(var(--primary));
      outline-offset: 2px;
      box-shadow: 0 0 0 4px hsl(var(--primary) / 0.1);
    }
  }

  /* Responsive Typography */
  /* Mobile: 16px base */
  :root {
    --font-size-base: 16px;
    --font-size-scale: 1;
  }

  /* Tablet: 17px base */
  @media (min-width: 768px) and (max-width: 1023px) {
    :root {
      --font-size-base: 17px;
      --font-size-scale: 1.0625;
    }
  }

  /* Desktop: 18px base */
  @media (min-width: 1024px) {
    :root {
      --font-size-base: 18px;
      --font-size-scale: 1.125;
    }
  }

  /* Ensure minimum font sizes for critical content */
  .critical-text,
  .medication-info,
  .dosage-info,
  .medical-content {
    font-size: max(16px, var(--text-base));
  }

  .critical-heading {
    font-size: max(18px, var(--text-lg));
  }

  .critical-large {
    font-size: max(20px, var(--text-xl));
  }

  /* Support text scaling up to 200% */
  @media (prefers-reduced-motion: no-preference) {
    html {
      font-size: clamp(14px, var(--font-size-base), 32px);
    }
  }

  /* Ensure text remains readable at all zoom levels */
  body {
    line-height: 1.5;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }

  /* Scale headings proportionally */
  h1 {
    font-size: calc(var(--text-4xl) * var(--font-size-scale, 1));
  }

  h2 {
    font-size: calc(var(--text-3xl) * var(--font-size-scale, 1));
  }

  h3 {
    font-size: calc(var(--text-2xl) * var(--font-size-scale, 1));
  }

  h4 {
    font-size: calc(var(--text-xl) * var(--font-size-scale, 1));
  }

  h5 {
    font-size: calc(var(--text-lg) * var(--font-size-scale, 1));
  }

  h6 {
    font-size: calc(var(--text-base) * var(--font-size-scale, 1));
  }
}

/* Responsive Layout Utilities */
@utility mobile-single-column {
  @media (max-width: 767px) {
    display: flex;
    flex-direction: column;
    width: 100%;
  }
}

@utility tablet-two-column {
  @media (min-width: 768px) and (max-width: 1023px) {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-6);
  }
}

@utility responsive-grid {
  display: grid;
  gap: var(--space-4);
  /* Mobile: single column */
  grid-template-columns: 1fr;

  /* Tablet: two columns */
  @media (min-width: 768px) {
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-6);
  }

  /* Desktop: three columns or maintain two based on content */
  @media (min-width: 1024px) {
    gap: var(--space-8);
  }

  transition:
    grid-template-columns 300ms ease-in-out,
    gap 300ms ease-in-out;
}

@utility responsive-flex {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);

  @media (min-width: 768px) {
    flex-direction: row;
    gap: var(--space-6);
  }

  @media (min-width: 1024px) {
    gap: var(--space-8);
  }

  transition:
    flex-direction 300ms ease-in-out,
    gap 300ms ease-in-out;
}

/* Responsive Spacing Utilities */
@utility mobile-spacing {
  @media (max-width: 767px) {
    padding: var(--space-4);
    gap: var(--space-4);
  }
}

@utility tablet-spacing {
  @media (min-width: 768px) and (max-width: 1023px) {
    padding: var(--space-6);
    gap: var(--space-6);
  }
}

@utility desktop-spacing {
  @media (min-width: 1024px) {
    padding: var(--space-8);
    gap: var(--space-8);
  }
}

@utility responsive-section-spacing {
  /* Mobile */
  padding: var(--space-4);
  margin-bottom: var(--space-6);

  /* Tablet */
  @media (min-width: 768px) {
    padding: var(--space-6);
    margin-bottom: var(--space-8);
  }

  /* Desktop */
  @media (min-width: 1024px) {
    padding: var(--space-8);
    margin-bottom: var(--space-12);
  }
}

@utility responsive-card-spacing {
  /* Mobile */
  padding: var(--space-4);

  /* Tablet */
  @media (min-width: 768px) {
    padding: var(--space-5);
  }

  /* Desktop */
  @media (min-width: 1024px) {
    padding: var(--space-6);
  }
}

@utility responsive-gap {
  gap: var(--space-4);

  @media (min-width: 768px) {
    gap: var(--space-6);
  }

  @media (min-width: 1024px) {
    gap: var(--space-8);
  }
}

/* Interaction Utilities */
@utility mobile-touch-target {
  min-height: 48px;
  min-width: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px 16px;
}

@utility desktop-hover-lift {
  @media (min-width: 1024px) and (hover: hover) and (pointer: fine) {
    transition:
      transform 200ms ease-out,
      box-shadow 200ms ease-out;
  }

  @media (min-width: 1024px) and (hover: hover) and (pointer: fine) {
    &:hover {
      transform: translateY(-2px);
    }
  }
}

@utility desktop-focus-ring {
  @media (min-width: 1024px) {
    &:focus-visible {
      outline: 2px solid hsl(var(--primary));
      outline-offset: 2px;
      box-shadow: 0 0 0 4px hsl(var(--primary) / 0.1);
    }
  }
}

/* Responsive Typography Utilities */
@utility responsive-text {
  font-size: var(--text-base);
  line-height: 1.5;

  @media (min-width: 768px) {
    font-size: calc(var(--text-base) * 1.0625);
  }

  @media (min-width: 1024px) {
    font-size: calc(var(--text-base) * 1.125);
  }
}

@utility responsive-heading {
  font-size: var(--text-2xl);
  line-height: 1.3;
  font-weight: 600;

  @media (min-width: 768px) {
    font-size: calc(var(--text-2xl) * 1.0625);
  }

  @media (min-width: 1024px) {
    font-size: calc(var(--text-2xl) * 1.125);
  }
}

@utility text-scale-safe {
  /* Ensure text scales properly up to 200% */
  max-width: 100%;
  overflow-wrap: break-word;
  word-wrap: break-word;
  hyphens: auto;
  line-height: 1.5;
}

/* Orientation Utilities */
@utility mobile-compact-landscape {
  @media (max-width: 767px) and (orientation: landscape) {
    padding: var(--space-2);
    gap: var(--space-2);
  }
}

@utility tablet-orientation-smooth {
  @media (min-width: 768px) and (max-width: 1023px) {
    transition:
      grid-template-columns 300ms ease-in-out,
      gap 300ms ease-in-out,
      padding 300ms ease-in-out,
      max-width 300ms ease-in-out;
  }
}

/* ==========================================================================
   12. Accessibility & Fallbacks
   ========================================================================== */

@layer base {
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    body {
      --foreground: 0 0% 0%;
      --background: 0 0% 100%;
      --muted-foreground: 0 0% 20%;
    }
    .dark {
      --foreground: 0 0% 100%;
      --background: 0 0% 0%;
      --muted-foreground: 0 0% 80%;
    }
  }

  /* Reduced motion support - Comprehensive fallbacks */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      animation-delay: 0s !important;
      transition-delay: 0s !important;
      scroll-behavior: auto !important;
    }

    /* Override common animation classes */
    .animate-spin,
    .animate-ping,
    .animate-pulse,
    .animate-bounce,
    .animate-check,
    .animate-progress {
      animation: none !important;
    }

    /* Override transition utilities */
    .transition,
    .transition-all,
    .transition-colors,
    .transition-opacity,
    .transition-shadow,
    .transition-transform {
      transition: none !important;
    }

    /* Ensure interactive elements still provide visual feedback */
    button:active,
    [role="button"]:active {
      opacity: 0.8;
    }

    /* Ensure focus is still visible */
    *:focus-visible {
      outline: 2px solid hsl(var(--ring));
      outline-offset: 2px;
    }

    /* Ensure loading states are visible without animation */
    [aria-busy="true"],
    [data-loading="true"] {
      opacity: 0.7;
      cursor: wait;
    }

    /* Ensure disabled states are clear */
    [disabled],
    [aria-disabled="true"] {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* Ensure expanded/collapsed states are clear without animation */
    [aria-expanded="true"] {
      /* Content is visible - no additional styles needed */
      display: block;
    }

    [aria-expanded="false"] {
      /* Content is hidden - no additional styles needed */
      display: none;
    }

    /* Ensure modal/dialog visibility without animation */
    [data-state="open"],
    [aria-modal="true"] {
      display: block;
    }

    [data-state="closed"] {
      display: none;
    }
  }
}

/**
 * Graceful Degradation and Fallbacks
 * This section documents and implements fallback strategies for modern CSS features
 * to ensure the application works across all browsers and respects user preferences.
 */

/* Glassmorphism Fallbacks */
@supports (backdrop-filter: blur(10px)) {
  .glass-supported {
    backdrop-filter: blur(10px);
  }
}

@supports not (backdrop-filter: blur(10px)) {
  .glass-supported {
    background: hsl(var(--background) / 0.98);
    border: 1px solid hsl(var(--border));
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  }
}

/* Gradient Fallbacks */
.gradient-example {
  background-color: hsl(var(--primary-500));
  background-image: linear-gradient(135deg, hsl(var(--primary-400)) 0%, hsl(var(--primary-600)) 100%);
}

.text-gradient-example {
  color: hsl(var(--primary-500));
  background: linear-gradient(135deg, hsl(var(--primary-400)) 0%, hsl(var(--primary-600)) 100%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

@supports not (background-clip: text) {
  .text-gradient-example {
    color: hsl(var(--primary-500));
    background: none;
    -webkit-text-fill-color: currentColor;
  }
}

/* Animation Fallbacks & Functionality Preservation */
@media (prefers-reduced-motion: reduce) {
  .animated-element {
    transition: none !important;
  }
  .animated-element:hover {
    transform: none;
    opacity: 0.9;
  }
  button:active,
  [role="button"]:active {
    transform: none;
  }
  [data-radix-dialog-overlay],
  [data-radix-dialog-content],
  [data-radix-dropdown-menu-content],
  [data-radix-select-content],
  [data-radix-accordion-content],
  [data-radix-tooltip-content] {
    animation: none !important;
    opacity: 1;
    transform: none;
  }
}

/* Browser-Specific Fallbacks */
@supports (-webkit-backdrop-filter: blur(10px)) and (not (backdrop-filter: blur(10px))) {
  .glass-effect {
    -webkit-backdrop-filter: blur(12px) saturate(180%);
  }
}

@-moz-document url-prefix() {
  .glass-effect {
    background: hsl(var(--background) / 0.97);
  }
}
